<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org" th:attr="lang=${#locale}">
<head>
  <meta charset="UTF-8">
  <title th:text="#{auth.reset.title}">Réinitialiser</title>
  <style>
    body{margin:0;font-family:'Segoe UI',sans-serif;background:#0f172a;color:#fff;display:grid;place-items:center;height:100vh}
    .card{background:rgba(255,255,255,.05);padding:24px;border-radius:10px;width:360px}
    input{width:100%;padding:10px;border-radius:6px;border:none;background:rgba(255,255,255,.1);color:#fff;margin:6px 0}
    button{width:100%;padding:10px;border:none;background:#16a34a;color:#fff;border-radius:6px;cursor:pointer;margin-top:10px}
    button:hover{background:#15803d}
    .err{color:#fca5a5;margin-top:6px}
    .lang{position:fixed;top:10px;right:10px;opacity:.9}
    .lang a{color:#a7f3d0;text-decoration:none;margin-left:6px}
  </style>
</head>
<body>

<!-- Sélecteur de langue (optionnel si tu as un header commun) -->
<div class="lang">
  <a th:href="@{__${#httpServletRequest.requestURI}__(lang='fr')}">FR</a> |
  <a th:href="@{__${#httpServletRequest.requestURI}__(lang='en')}">EN</a> |
  <a th:href="@{__${#httpServletRequest.requestURI}__(lang='nl_BE')}">NL</a>
</div>

<div class="card" th:if="${invalid != true}">
  <h2 th:text="#{auth.reset.title}">Nouveau mot de passe</h2>
  <form th:action="@{/mot-de-passe/reinitialiser}" method="post">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
    <input type="hidden" name="token" th:value="${token}">
    <input type="password" name="password" th:placeholder="#{auth.reset.newpassword}" placeholder="Nouveau mot de passe" required>
    <button type="submit" th:text="#{auth.reset.submit}">Valider</button>
  </form>
</div>

<div class="card err" th:if="${invalid == true}">
  <span th:text="#{auth.reset.invalid}">Lien invalide ou expiré.</span>
  <p style="margin-top:8px;">
    <a th:href="@{/mot-de-passe/oublie}" th:text="#{auth.reset.requestnew}">Demander un nouveau lien</a>
  </p>
</div>
</body>
</html>
