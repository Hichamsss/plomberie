<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/layout :: base(
         pageTitle=#{title.demande} ?: 'Demande de devis - Le Bon Tuyau',
         body=~{::content},
         showUrgent=${true},
         extraHead=~{::extraHead},
         extraScripts=~{::extraScripts}
      )}">

<extraHead>
  <style>
    body { font-family: 'Open Sans', sans-serif; background:#f4f4f4; margin:0; color:#333; }
    .container { width:90%; max-width:800px; margin:auto; padding:20px; }
    h1 { text-align:center; color:#00497a; font-size:32px; }
    form { background:#fff; padding:30px; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.1); }
    input, textarea { width:100%; padding:12px; margin:10px 0; border:1px solid #ccc; border-radius:5px; font-size:16px; }
    button { background:#FF6F00; color:#fff; border:none; padding:12px 20px; font-size:18px; border-radius:5px; cursor:pointer; }
    button:hover { background:#e65c00; }
    .confirmation { background:#d4edda; color:#155724; padding:15px; border-radius:5px; margin:20px 0; text-align:center; }
    .err { color:#b02a37; font-size:14px; margin-top:-6px; }
  </style>
</extraHead>

<content>
  <div class="container">
    <h1 th:text="#{demande.title}">Faire une demande de devis</h1>

    <!-- Message de confirmation (flash) -->
    <div th:if="${message}" class="confirmation" th:text="${message}"></div>

    <!-- Formulaire avec binding comme avant -->
    <form th:action="@{/demande}" th:object="${demande}" method="post">
      <input th:if="${_csrf != null}" type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

      <input type="text" th:field="*{nom}" th:placeholder="#{demande.placeholder.name}" required>
      <div class="err" th:if="${#fields.hasErrors('nom')}" th:errors="*{nom}"></div>

      <input type="email" th:field="*{email}" th:placeholder="#{demande.placeholder.email}" required>
      <div class="err" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>

      <input type="tel" th:field="*{telephone}" th:placeholder="#{demande.placeholder.phone}" required>
      <div class="err" th:if="${#fields.hasErrors('telephone')}" th:errors="*{telephone}"></div>

      <textarea th:field="*{message}" th:placeholder="#{demande.placeholder.message}" rows="6" required></textarea>
      <div class="err" th:if="${#fields.hasErrors('message')}" th:errors="*{message}"></div>

      <button type="submit" th:text="#{demande.submit}">Envoyer</button>
    </form>
  </div>
</content>

<extraScripts>
  <!-- JS spÃ©cifique Demande (optionnel) -->
</extraScripts>
</html>
